### 2025-12-14 TIL

• CIDR 表記（/24 など）の意味
• サブネット / サブネットマスク / ゲートウェイの関係
• 同一サブネット通信と異なるサブネット通信の違い
• 自治体・LGWAN での実務イメージ

⸻

🧠 学んだこと

1. CIDR 表記（a.b.c.d/x）の「/x」
   • IPv4 は 32 ビット
   • /x は 先頭から何ビットがネットワーク部かを表す
   • 例：
   • /24 → ネットワーク部 24 ビット、ホスト部 8 ビット

⸻

2.  サブネットマスクと CIDR の対応

    255.255.255.0
    = 11111111.11111111.11111111.00000000
    = 1 が 24 個
    = /24

        •	サブネットマスクは「どこまでがネットワークか」を示す
        •	CIDR（/24）はその 短縮表記

⸻

3. 使える IP アドレス数
   • 使える台数 = 2^(32 - x) - 2
   • 使えない 2 つ：
   • ホスト部が全部 0 → ネットワークアドレス
   • ホスト部が全部 1 → ブロードキャスト

CIDR 使える台数 用途例
/24 254 課・フロアの LAN
/16 約 6.5 万 大規模ネットワーク
/30 2 ルータ間 / LGWAN 接続

⸻

4. サブネットとは
   • 同じサブネット = 直接通信できる範囲
   • サブネットが違うと必ずルータ（ゲートウェイ）を通る

⸻

5. ゲートウェイ IP の役割
   • ゲートウェイ = サブネットの出口
   • 自分と違うサブネット宛の通信は必ずここへ送る

例：

IP : 192.168.1.10/24
GW : 192.168.1.1

⸻

6. 同一サブネット通信と異なるサブネット通信

同じサブネット（例：192.168.1.3 → 192.168.1.2）
• ARP で相手の MAC アドレスを取得
• 宛先 MAC = 相手の MAC
• ルータを通らない（L2 通信）
• MAC 通信だから安全、ではない

別サブネット（例：192.168.1.3 → 192.168.2.2）
• 宛先 MAC = ゲートウェイの MAC
• 必ずルータ / FW を通過
• ログ・制御・セキュリティ境界を作れる

⸻

7. 自治体 / LGWAN 実務との対応
   • 庁内 LAN：
   • /24 が多い（人・端末が多い）
   • LGWAN 接続：
   • /30 が多い（機器対機器）
   • サブネット分離 = セキュリティ境界
   • LGWAN / 庁内 / インターネットは 必ず別サブネット

Go

⸻
